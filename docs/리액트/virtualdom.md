---
sidebar_position: 3
---

# 가상 DOM

## **가상 DOM이란?**
가상 DOM은 **HTML 문서를 자바스크립트 객체로 모델링한 가벼운 복사본**입니다.  
DOM은 Document Object Model(문서 객체 모델)의 약자이며, HTML, XML 문서를 프로그래밍적으로 조작하기 위한 계층적 구조를 의미합니다.  
가상 DOM은 브라우저의 **실제 DOM**을 직접 업데이트하지 않고, 이를 대신해 사용하는 메모리 내의 가벼운 객체입니다.  

리액트에서 UI를 변경할 때 다음 과정을 거칩니다:
1. 상태 변화로 인해 **가상 DOM을 먼저 업데이트**합니다.
2. 가상 DOM에서 변경 사항을 식별(diffing)합니다.
3. **재조정(Reconciliation)**⭐ 과정을 통해 변경 사항만 실제 DOM에 반영합니다.

---

## **실제 DOM**
실제 DOM은 브라우저가 HTML 문서를 파싱한 후 생성하는 객체 모델입니다. 이 모델은 HTML 요소를 계층적 구조로 표현하며, 사용자의 상호작용에 따라 동적으로 업데이트됩니다.

### **실제 DOM의 문제점**

#### 성능 저하  
DOM 업데이트는 레이아웃 계산과 리페인팅 작업을 유발하여, 특히 복잡한 웹 페이지에서는 성능 병목이 발생할 수 있습니다.  
- 엘리먼트의 추가/제거 또는 텍스트와 속성 업데이트 시 브라우저는 레이아웃을 다시 계산하고 영향을 받는 영역을 다시 그립니다.
- 크고 복잡한 웹 페이지일수록 리소스를 많이 소모하며 속도가 느려질 가능성이 높습니다.

#### 브라우저 간 호환성  
브라우저별로 DOM 처리 방식이 다를 수 있어, 호환성 문제를 해결하려면 추가 작업이 필요합니다.
- 일부 브라우저에서 특정 DOM 엘리먼트나 속성을 지원하지 않을 수 있습니다.
- 모든 브라우저에서 애플리케이션이 제대로 동작하도록 추가적인 시간과 노력이 요구됩니다.

---

## **리액트의 해결 방법**
리액트는 가상 DOM을 통해 위 문제를 효과적으로 해결합니다:
1. 가상 DOM에서 상태 변화를 처리하고, 변경된 부분만 계산합니다.
2. 효율적인 비교 알고리즘(diffing)을 통해 변경 사항을 최소화합니다.
3. 필요한 부분만 실제 DOM에 업데이트하여 성능을 최적화합니다.

### **SyntheticEvent**  
리액트는 이벤트 처리에서 브라우저 간 차이를 줄이기 위해 SyntheticEvent라는 일관된 인터페이스를 제공합니다.  
- **이벤트 위임**: 루트 엘리먼트에 이벤트를 등록하여 성능을 향상시킵니다.
- **다양한 기능 제공**: 네이티브 이벤트를 감싸 추가적인 유틸리티를 제공합니다.
- **브라우저 간 통합 인터페이스**: 코드의 호환성을 높여 추가적인 구현 작업을 줄입니다.

---

## **문서 조각(Document Fragment)**
DOM을 직접 조작할 때 특히 여러 변경 사항이 발생하면 성능 저하가 심해질 수 있습니다. 이를 보완하기 위해 문서 조각(Document Fragment)이 활용됩니다.

### 문서 조각의 장점
1. **일괄 업데이트**: 여러 변경 사항을 임시로 저장하고 한 번에 DOM에 적용하여 성능을 향상시킵니다.
2. **메모리 효율성**: DOM에서 분리된 가벼운 컨테이너로, 리소스를 절약합니다.
3. **중복 렌더링 방지**: 각 업데이트마다 렌더링하지 않고, 최종 결과만 렌더링합니다.

문서 조각의 업데이트 방식은 리액트의 가상 DOM과 유사합니다. 그러나 리액트는 이를 한 단계 발전시켜:
- 전체 UI를 효율적으로 비교(diffing)하며,
- **일괄적으로 업데이트**를 처리해 렌더링 효율성을 극대화합니다.

덕분에 개발자는 복잡한 DOM 최적화 작업을 신경 쓰지 않아도 되며, 애플리케이션 개발에만 집중할 수 있습니다.

---

## 요약
| 항목              | 실제 DOM                                   | 가상 DOM                             |
|-------------------|------------------------------------------|-------------------------------------|
| **업데이트 방식** | 모든 변경 사항 즉시 반영                   | 변경 사항만 계산 후 업데이트           |
| **성능**          | 레이아웃 계산 및 리페인팅으로 성능 저하     | 최소한의 연산으로 성능 최적화          |
| **호환성**        | 브라우저별 구현 차이로 추가 작업 필요        | 일관된 방식으로 브라우저 간 차이 해결   |

---


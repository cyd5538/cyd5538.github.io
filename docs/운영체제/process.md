---
sidebar_position: 3
---

# 프로세스
프로세스는 컴퓨터에서 실행되고 있는 프로그램을 말하며, CPU 스케줄링의 대상이 되는 작업(task)이라는 용어와 같은 의미로 사용됩니다.
프로그램이 메모리에 올라가면 프로세스로 인스턴스화되며, 이후 운영체제의 CPU 스케줄러에 따라 CPU가 프로세스를 실행합니다.

프로세스는 프로그램으로부터 인스턴스화된 것을 의미합니다. 예를 들어, 프로그램은 구글 크롬(chrome.exe)과 같은 실행 파일이며, 이 파일을 더블클릭하면 구글 크롬 '프로세스'가 실행됩니다.

## 프로세스의 상태
프로세스는 여러 가지 상태 값을 가질 수 있습니다.
![프로세스의 상태](/img/process.png)


### 생성 상태
프로세스가 생성된 상태를 의미하며, fork() 또는 exec() 함수를 통해 생성됩니다. 이때 PCB(Process Control Block)가 할당됩니다.

- **fork()**: 부모 프로세스의 주소 공간을 그대로 복사하며, 새로운 자식 프로세스를 생성하는 함수입니다. 주소 공간만 복사할 뿐, 부모 프로세스의 비동기 작업 등은 상속되지 않습니다.
- **exec()**: 새로운 프로세스를 생성하는 함수로, 기존 프로세스를 새로운 프로그램으로 대체합니다.

### 대기 상태
메모리 공간이 충분하면 메모리를 할당받고, 아니면 대기 상태로 남아 있으며, CPU 스케줄러로부터 CPU 소유권이 넘어오기를 기다립니다.

### 대기 중단 상태
메모리 부족 등의 이유로 프로세스 실행이 일시 중단된 상태입니다.

### 실행 상태
CPU 소유권과 메모리를 할당받아 인스트럭션을 수행 중인 상태입니다. 이를 CPU burst가 발생했다고도 표현합니다.

### 중단 상태
어떤 이벤트가 발생하기를 기다리며 프로세스가 차단된 상태입니다. 예를 들어, I/O 디바이스 요청으로 인해 프로세스가 대기하는 경우가 이에 해당합니다.

### 일시 중단 상태
중단된 상태에서 프로세스가 실행되려고 했지만, 메모리 부족 등의 이유로 일시 중단된 상태입니다.

### 종료 상태
프로세스가 실행을 완료하고 운영체제에 의해 정리되는 상태입니다. 정상적으로 종료될 수도 있지만, 부모 프로세스가 자식 프로세스를 강제 종료시키는 비자발적 종료도 가능합니다. 예를 들어, 사용자가 kill 명령어로 프로세스를 종료하는 경우가 이에 해당합니다.

## 프로세스의 메모리 구조
스프로세스는 다음과 같은 메모리 영역으로 구성됩니다.

### 스택 (Stack)
- 지역 변수, 매개변수, 함수 호출 정보 등이 저장되는 영역입니다.
- 컴파일 시 크기가 결정되며 동적으로 변합니다.
- 함수 호출 시마다 프레임이 생성되며, 함수가 종료되면 프레임이 제거됩니다.

### 힙 (Heap)
- 동적 할당 시 사용되며 런타임에 크기가 결정됩니다.
- `malloc()`과 같은 동적 메모리 할당 함수를 통해 메모리를 할당합니다.
- 스택과 반대 방향으로 성장하며, 과도한 사용 시 메모리 누수(Memory Leak)가 발생할 수 있습니다.


### 데이터 영역 (Data)
- 전역 변수와 정적 변수가 저장되는 영역입니다.
- BSS(Block Started by Symbol) 영역: 초기화되지 않은 전역 변수와 정적 변수가 0으로 초기화되어 저장됩니다.
- Data 영역: 0이 아닌 값으로 초기화된 전역 변수와 정적 변수가 저장됩니다.

### 코드 영역 (Text)
- 프로그램의 기계어 코드가 저장되는 영역입니다.
- 읽기 전용(RO) 메모리로 구성되며, 수정할 수 없습니다.

## PCB
운영체제가 프로세스를 관리하기 위해 유지하는 데이터 구조로, **프로세스의 메타데이터**가 저장됩니다.
:::note 메타데이터
데이터에 관한 구조화된 데이터이자 데이터를 설명하는 작은 데이터, 대량의 정보 가운데에서 찾고있는 정보를 효율적으로 찾아내서 이용하기 위해 일정한 규칙에 따라 콘텐츠에 따라 부여되는 데이터
:::

### PCB의 주요 오소
- **프로세스 스케줄링 상태**: 준비(Ready), 실행(Running), 대기(Waiting) 등
- **프로세스 ID**: 프로세스 식별자 및 자식 프로세스 ID
- **프로세스 권한**: CPU 및 I/O 디바이스 접근 권한
- **프로그램 카운터**: 실행할 명령어의 메모리 주소
- **CPU 레지스터**: 실행 중인 프로세스의 레지스터 값
- **CPU 스케줄링 정보**: 우선순위, 스케줄링 큐 정보
- **계정 정보**: 프로세스를 실행한 사용자, CPU 사용량

### 문맥 교환(Context Switch)
PCB를 교환하는 과정입니다. 하나의 프로세스에서 다른 프로세스로 전환될 때 발생하며, 운영체제가 현재 실행 중인 프로세스의 PCB를 저장하고, 새로운 프로세스의 PCB를 로드하는 과정이 반복됩니다.

### 멀티프로세싱
멀티프로세싱은 여러 개의 프로세스를 통해 동시에 두 가지 이상의 작업을 수행하는 기법입니다. 이를 통해 다음과 같은 이점을 얻을 수 있습니다.

- **병렬 처리 가능**: 하나 이상의 일을 병렬로 실행 가능
- **신뢰성 향상**: 특정 프로세스에 문제가 발생해도 다른 프로세스를 이용하여 작업 수행 가능
- **효율적인 자원 활용**: 다중 CPU 환경에서 성능 향상

### 프로세스 간 통신 (IPC)
멀티프로세스 환경에서 서로 다른 프로세스 간 데이터를 주고받고 공유하는 메커니즘을 PC(Inter-Process Communication)라고 합니다.

### IPC 방식
- **공유 메모리**: 동일한 메모리 블록을 여러 프로세스가 공유
- **파일**: 프로세스 간 파일을 통해 데이터 공유
- **소켓**: 네트워크 인터페이스를 통해 데이터 송수신 (TCP, UDP)
- **익명 파이프**: 부모-자식 프로세스 간 단방향 통신
- **명명된 파이프**: 네트워크를 포함한 다중 프로세스 간 통신 지원
- **메시지 큐**: 커널의 전역 변수 형태로 메시지를 주고받는 방식

각 방식마다 성능, 사용성, 동기화 방식에 차이가 있으므로, 환경에 따라 적절한 IPC 방식을 선택해야 합니다.

---
sidebar_position: 5
---

# HTTP

하이퍼텍스트 전송 프로토콜(HTTP)은 하이퍼링크를 사용하여 인터넷에서 웹 페이지를 로드하는 데 사용됩니다.

## HTTP/ 1.0

HTTP/1.0은 기본적으로 **한 연결당 하나의 요청만 처리**하도록 설계되었습니다. 이로 인해 **RTT(Round Trip Time)**가 증가하는 문제가 발생했습니다.

:::warning RTT 증가
서버에서 파일을 가져올 때마다 **TCP 3-웨이 핸드셰이크**가 반복적으로 수행되어 RTT가 증가하는 단점이 있습니다.
:::

:::note RTT
RTT(Round Trip Time)는 **패킷이 목적지에 도달한 후 다시 출발지로 돌아오는 데 걸리는 시간**을 의미합니다.
:::

### RTT의 증가를 해결하기 위한 방법 ?
매번 새로운 연결을 생성할 때마다 RTT가 증가하면 서버에 부담이 가중되며, 사용자 응답 시간도 길어집니다. 이를 해결하기 위해 **이미지 스프라이트, 코드 압축, 이미지 Base64 인코딩** 등의 기술이 사용되었습니다.

#### 이미지 스프라이트
여러 개의 작은 이미지를 하나의 큰 이미지로 결합하여 다운로드한 후, `background-image`의 `position` 속성을 이용해 필요한 부분만 표시하는 방식입니다. 이를 통해 HTTP 요청 수를 줄여 성능을 개선할 수 있습니다.

#### 코드 압축
공백 및 개행 문자를 제거하여 코드 크기를 최소화하는 기법입니다. 일반적으로 HTML, CSS, JavaScript 파일에 적용됩니다.

#### 이미지 Base64 인코딩
이미지를 **Base64 문자열로 변환하여 HTML 또는 CSS 내에서 직접 사용할 수 있도록 하는 방식**입니다. 이를 활용하면 HTTP 요청 횟수를 줄일 수 있으나, **파일 크기가 약 37% 증가하는 단점**이 있습니다.

:::note 인코딩
데이터를 특정 형식으로 변환하여 **저장 공간 절약, 처리 속도 향상, 표준화, 보안 강화** 등의 목적을 달성하는 방식입니다.
:::

## HTTP/ 1.1
HTTP/1.1에서는 **Keep-Alive** 옵션을 도입하여 **한 번의 TCP 연결로 여러 개의 요청을 처리할 수 있도록 개선**되었습니다. HTTP/1.0에서도 Keep-Alive 기능이 존재했지만, 표준화되지 않았습니다.

### HOL Blocking
**HOL Blocking**이란, **네트워크에서 첫 번째 패킷의 지연으로 인해 뒤에 있는 패킷들도 대기하게 되어 발생하는 성능 저하 현상**을 의미합니다.

예를 들어, 클라이언트가 `image.jpg`, `style.css`, `data.xml`을 요청했을 때, `image.jpg` 다운로드가 지연되면 나머지 파일들의 다운로드도 함께 지연됩니다.

### 무거운 헤더 구조
HTTP/1.1의 **헤더에는 쿠키 등의 다양한 메타데이터가 포함**되며, **압축되지 않아 크기가 큽니다**. 이로 인해 요청 및 응답의 크기가 증가하여 성능이 저하될 수 있습니다.

## HTTP/2
HTTP/2는 **SPDY 프로토콜에서 발전된 형태**로, **HTTP/1.x보다 지연 시간을 줄이고 응답 속도를 개선**한 프로토콜입니다. 주요 특징은 다음과 같습니다.

### 멀티플렉싱(Multiplexing)
**여러 개의 스트림을 통해 동시에 데이터를 송수신하는 방식**입니다. 특정 스트림의 패킷이 손실되더라도, 해당 스트림에만 영향을 미치고 나머지 스트림은 정상적으로 동작할 수 있습니다.

:::note 스트림(Stream)
시간이 지나면서 순차적으로 사용할 수 있는 **데이터의 흐름**을 의미합니다.
:::


### 헤더 압축
HTTP/2는 **헤더 크기 감소를 위해 HPACK 압축 방식을 사용**하며, 이는 **허프만 코딩(Huffman Coding) 알고리즘을 적용하여** 데이터를 효율적으로 압축합니다.

:::note 허프만 코딩
자주 사용되는 데이터를 **적은 비트 수로 표현하고, 덜 사용되는 데이터는 긴 비트 수로 표현**하여 전체적인 크기를 줄이는 방식입니다.   
:::

### 서버 푸시
클라이언트가 요청하기 전에 **서버가 미리 필요한 리소스를 클라이언트에게 전송**할 수 있는 기능입니다. 예를 들어, 클라이언트가 HTML 파일을 요청하면 **HTML에서 참조하는 CSS 및 JS 파일을 서버가 미리 전송**하여 로딩 속도를 개선할 수 있습니다.

## HTTPS
HTTP/2는 보안 강화를 위해 **HTTPS 기반에서만 동작**합니다. HTTPS는 **SSL/TLS 계층을 추가하여 통신을 암호화**하며, 이를 통해 데이터를 안전하게 주고받을 수 있습니다.


### SSL/TLS
SSL/TLS는 **전송 계층에서 보안을 제공하는 프로토콜**로, 통신 시 데이터를 암호화하여 **해킹, 도청, 변조 등을 방지**합니다.
### 보안 세션
SSL/TLS는 **클라이언트와 서버 간 핸드셰이크 과정을 통해 보안 세션을 생성**하며, 이를 기반으로 데이터를 안전하게 교환합니다.

:::note 세션(Session)
사용자가 **일정 시간 동안 응용 프로그램, 자원 등을 사용할 수 있는 기간**을 의미합니다.
:::

#### TLS 핸드셰이크 과정
1. 클라이언트가 **서버에 지원 가능한 암호화 알고리즘 목록을 전송**합니다.
2. 서버는 **지원 가능한 알고리즘을 선택하고, 인증서를 클라이언트에 전송**합니다.
3. 클라이언트는 **인증서를 검증한 후, 세션 키를 생성하여 서버와 공유**합니다.
4. **데이터 송수신이 시작됩니다.**

#### 사이퍼 슈트(Cipher Suite)
암호화 통신을 수행하기 위한 **암호화 알고리즘, 키 교환 알고리즘, 해싱 알고리즘의 조합**을 의미합니다. 예시:
- `TLS_AES_128_GCM_SHA256`
  - **TLS**: 프로토콜
  - **AES_128_GCM**: 데이터 암호화 알고리즘
  - **SHA256**: 해싱 알고리즘
    
## HTTP/3

HTTP/3은 **TCP가 아닌 UDP 기반의 QUIC 프로토콜을 사용**하여 **초기 연결 속도를 개선**하고, **멀티플렉싱 성능을 최적화**한 버전입니다.

### 초기 연결 설정 시 지연 시간 감소
QUIC은 **TCP 3-웨이 핸드셰이크 없이 1-RTT만으로 통신을 시작할 수 있습니다**. 이를 통해 연결 설정 시 발생하는 지연 시간을 줄일 수 있습니다.

### 패킷 손실 감소
QUIC은 **순방향 오류 수정(FEC, Forward Error Correction) 메커니즘을 적용**하여 패킷 손실을 줄이고, 네트워크 환경이 열악한 경우에도 안정적인 통신이 가능합니다.

